# AI êµìœ¡ ì±—ë´‡ ì•± ê°œë°œ ê³„íšì„œ (GitHub Pages + Supabase)

## ğŸ¯ í”„ë¡œì íŠ¸ ê°œìš”
STRUCTURE.md ê¸°ë°˜ AI êµìœ¡ í”Œë«í¼ì„ GitHub Pages + Supabase ì¡°í•©ìœ¼ë¡œ êµ¬ì¶•í•˜ì—¬ **ì™„ì „ ë¬´ë£Œ**ë¡œ ì‹œì‘ ê°€ëŠ¥í•œ ì†”ë£¨ì…˜

## ğŸ—ï¸ ê¸°ìˆ  ìŠ¤íƒ

### í”„ë¡ íŠ¸ì—”ë“œ & ë°°í¬
- **React 18.3.1** + **TypeScript**
- **Vite** (ë¹Œë“œ ë„êµ¬)
- **Tailwind CSS** + **shadcn/ui**
- **React Router DOM 6.26.2**
- **TanStack React Query 5.56.2**
- **GitHub Pages** (ì •ì  ì‚¬ì´íŠ¸ í˜¸ìŠ¤íŒ…)
- **GitHub Actions** (ìë™ ë°°í¬)

### ë°±ì—”ë“œ ì„œë¹„ìŠ¤ (Supabase)
- **Supabase Database** (PostgreSQL)
- **Supabase Auth** (ì¸ì¦ ì‹œìŠ¤í…œ)
- **Supabase Realtime** (ì‹¤ì‹œê°„ ê¸°ëŠ¥)
- **Supabase Storage** (íŒŒì¼ ì €ì¥ì†Œ)
- **Supabase Edge Functions** (ì„œë²„ë¦¬ìŠ¤ í•¨ìˆ˜)

### AI í†µí•©
- **OpenAI API** (GPT ëª¨ë¸)
- **Anthropic Claude API**
- **Vector Embeddings** (Supabase Vector)

## ğŸ“… ê°œë°œ ì¼ì • (ì´ 6-8ì¼)

### Phase 1: GitHub ì„¤ì • ë° ê¸°ì´ˆ êµ¬ì¡° (1-2ì¼)
**Day 1: GitHub Repository ë° í™˜ê²½ ì„¤ì •**
- GitHub Repository ìƒì„± (Public)
- GitHub Pages í™œì„±í™”
- GitHub Actions ì›Œí¬í”Œë¡œìš° ì„¤ì •
- ë¡œì»¬ ê°œë°œí™˜ê²½ êµ¬ì¶•
- Supabase í”„ë¡œì íŠ¸ ìƒì„±

**Day 2: React í”„ë¡œì íŠ¸ ì´ˆê¸°í™”**
- React + Vite + TypeScript í”„ë¡œì íŠ¸ ìƒì„±
- GitHub Pagesìš© ì„¤ì • (base path, routing)
- Supabase í´ë¼ì´ì–¸íŠ¸ ì„¤ì •
- ê¸°ë³¸ í´ë” êµ¬ì¡° ë° ì»´í¬ë„ŒíŠ¸ ìƒì„±

### Phase 2: í•µì‹¬ ê¸°ëŠ¥ ê°œë°œ (2-3ì¼)
**Day 3: ì¸ì¦ ì‹œìŠ¤í…œ ë° ê¸°ë³¸ UI**
- Supabase Auth ì—°ë™
- ë¡œê·¸ì¸/íšŒì›ê°€ì… ì»´í¬ë„ŒíŠ¸
- ì—­í•  ê¸°ë°˜ ë¼ìš°íŒ… (admin/student)
- shadcn/ui ì»´í¬ë„ŒíŠ¸ ì„¤ì •

**Day 4: AI ì±„íŒ… ì‹œìŠ¤í…œ**
- Edge Function: ai-chat êµ¬í˜„
- ì‹¤ì‹œê°„ ì±„íŒ… ì¸í„°í˜ì´ìŠ¤
- OpenAI API í†µí•©
- ì±„íŒ… íˆìŠ¤í† ë¦¬ ê´€ë¦¬

**Day 5: ê´€ë¦¬ì ë° í•™ìƒ ì¸í„°í˜ì´ìŠ¤**
- ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ (í•™ìƒ ê´€ë¦¬, ëª¨ë‹ˆí„°ë§)
- í•™ìƒ í™œë™ ì°¸ì—¬ í™”ë©´
- ì²´í¬ë¦¬ìŠ¤íŠ¸ ì‹œìŠ¤í…œ
- ê¸°ë³¸ ë…¼ì¦/í‰ê°€ ê¸°ëŠ¥

### Phase 3: ê³ ê¸‰ ê¸°ëŠ¥ ë° ìµœì í™” (2-3ì¼)
**Day 6: RAG ì‹œìŠ¤í…œ ë° íŒŒì¼ ì²˜ë¦¬**
- PDF ì²˜ë¦¬ Edge Function
- Vector ê²€ìƒ‰ êµ¬í˜„
- íŒŒì¼ ì—…ë¡œë“œ/ë‹¤ìš´ë¡œë“œ
- ë¬¸ì„œ ê¸°ë°˜ AI ë‹µë³€

**Day 7: ë°°í¬ ë° ìµœì í™”**
- GitHub Actions ìë™ ë°°í¬ ì„¤ì •
- ì„±ëŠ¥ ìµœì í™” (ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…, ìºì‹±)
- ì—ëŸ¬ ì²˜ë¦¬ ë° UX ê°œì„ 
- ëª¨ë°”ì¼ ë°˜ì‘í˜• ìµœì í™”

**Day 8: í…ŒìŠ¤íŠ¸ ë° ë¬¸ì„œí™”**
- ì „ì²´ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
- ì‚¬ìš©ì ê°€ì´ë“œ ì‘ì„±
- ë²„ê·¸ ìˆ˜ì • ë° ìµœì¢… ë°°í¬

## ğŸ›ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GitHub Pages   â”‚    â”‚    Supabase      â”‚    â”‚  External APIs  â”‚
â”‚   (Frontend)    â”‚â”€â”€â”€â”€â”‚   (Backend)      â”‚â”€â”€â”€â”€â”‚                 â”‚
â”‚                 â”‚    â”‚                  â”‚    â”‚ â€¢ OpenAI API    â”‚
â”‚ â€¢ React SPA     â”‚    â”‚ â€¢ PostgreSQL DB  â”‚    â”‚ â€¢ Claude API    â”‚
â”‚ â€¢ Static Files  â”‚    â”‚ â€¢ Auth System    â”‚    â”‚                 â”‚
â”‚ â€¢ CDN Delivery  â”‚    â”‚ â€¢ Realtime       â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ â€¢ HTTPS         â”‚    â”‚ â€¢ Storage        â”‚
â”‚ â€¢ Custom Domain â”‚    â”‚ â€¢ Edge Functions â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

GitHub Actions (CI/CD)
â”œâ”€â”€ ì½”ë“œ Push ê°ì§€
â”œâ”€â”€ ìë™ ë¹Œë“œ (npm run build)
â”œâ”€â”€ GitHub Pages ë°°í¬
â””â”€â”€ ë°°í¬ ì™„ë£Œ ì•Œë¦¼
```

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
ai-education-platform/
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/
â”‚       â””â”€â”€ deploy.yml          # GitHub Actions ë°°í¬ ìŠ¤í¬ë¦½íŠ¸
â”‚
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ index.html
â”‚   â””â”€â”€ assets/
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ admin/              # ê´€ë¦¬ì ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ student/            # í•™ìƒ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ auth/               # ì¸ì¦ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â””â”€â”€ ui/                 # ê³µí†µ UI ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ pages/                  # í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ hooks/                  # ì»¤ìŠ¤í…€ í›…
â”‚   â”œâ”€â”€ types/                  # TypeScript íƒ€ì…
â”‚   â”œâ”€â”€ utils/                  # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
â”‚   â””â”€â”€ lib/
â”‚       â”œâ”€â”€ supabase.ts         # Supabase í´ë¼ì´ì–¸íŠ¸
â”‚       â””â”€â”€ auth.ts             # ì¸ì¦ í—¬í¼
â”‚
â”œâ”€â”€ supabase/                   # Supabase ì„¤ì • (ë¡œì»¬ ê°œë°œìš©)
â”‚   â”œâ”€â”€ functions/              # Edge Functions
â”‚   â”‚   â”œâ”€â”€ ai-chat/
â”‚   â”‚   â”œâ”€â”€ process-pdf/
â”‚   â”‚   â””â”€â”€ rag-search/
â”‚   â”œâ”€â”€ migrations/
â”‚   â””â”€â”€ config.toml
â”‚
â”œâ”€â”€ vite.config.ts              # GitHub Pages ì„¤ì • í¬í•¨
â”œâ”€â”€ package.json
â”œâ”€â”€ tailwind.config.js
â””â”€â”€ README.md
```

## âš™ï¸ GitHub Pages ì „ìš© ì„¤ì •

### 1. Vite ì„¤ì • (GitHub Pagesìš©)
```typescript
// vite.config.ts
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'

export default defineConfig({
  plugins: [react()],
  base: '/ai-education-platform/', // GitHub Repository ì´ë¦„
  build: {
    outDir: 'dist',
    assetsDir: 'assets',
  },
})
```

### 2. React Router ì„¤ì • (GitHub Pagesìš©)
```typescript
// src/App.tsx
import { BrowserRouter } from 'react-router-dom'

function App() {
  return (
    <BrowserRouter basename="/ai-education-platform">
      {/* ë¼ìš°íŠ¸ ì»´í¬ë„ŒíŠ¸ë“¤ */}
    </BrowserRouter>
  )
}
```

### 3. GitHub Actions ì›Œí¬í”Œë¡œìš°
```yaml
# .github/workflows/deploy.yml
name: Deploy to GitHub Pages

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout
      uses: actions/checkout@v3
      
    - name: Setup Node.js
      uses: actions/setup-node@v3
      with:
        node-version: '18'
        cache: 'npm'
        
    - name: Install dependencies
      run: npm ci
      
    - name: Build
      run: npm run build
      env:
        VITE_SUPABASE_URL: ${{ secrets.VITE_SUPABASE_URL }}
        VITE_SUPABASE_ANON_KEY: ${{ secrets.VITE_SUPABASE_ANON_KEY }}
        
    - name: Deploy to GitHub Pages
      uses: peaceiris/actions-gh-pages@v3
      if: github.ref == 'refs/heads/main'
      with:
        github_token: ${{ secrets.GITHUB_TOKEN }}
        publish_dir: ./dist
```

### 4. 404 í˜ì´ì§€ ì²˜ë¦¬ (SPA ë¼ìš°íŒ…ìš©)
```html
<!-- public/404.html -->
<!DOCTYPE html>
<html>
<head>
  <script>
    // GitHub Pages SPA í•´ê²°ì±…
    var pathSegmentsToKeep = 1;
    var l = window.location;
    l.replace(
      l.protocol + '//' + l.hostname + (l.port ? ':' + l.port : '') +
      l.pathname.split('/').slice(0, 1 + pathSegmentsToKeep).join('/') + 
      '/?/' + l.pathname.slice(1).split('/').slice(pathSegmentsToKeep).join('/').replace(/&/g, '~and~') +
      (l.search ? '&' + l.search.slice(1).replace(/&/g, '~and~') : '') +
      l.hash
    );
  </script>
</head>
<body></body>
</html>
```

```typescript
// src/main.tsx - 404 ë¦¬ë‹¤ì´ë ‰íŠ¸ ì²˜ë¦¬
useEffect(() => {
  // GitHub Pages SPA ë¦¬ë‹¤ì´ë ‰íŠ¸ ì²˜ë¦¬
  if (location.search.includes('/?/')) {
    const path = location.search.slice(3).replace(/~and~/g, '&')
    history.replaceState(null, '', path)
  }
}, [])
```

## ğŸ—„ï¸ Supabase ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„

### ê°„ì†Œí™”ëœ í…Œì´ë¸” êµ¬ì¡° (í•µì‹¬ë§Œ)
```sql
-- ì‚¬ìš©ì ê´€ë¦¬
CREATE TABLE user_roles (
  id UUID REFERENCES auth.users(id) PRIMARY KEY,
  role TEXT NOT NULL CHECK (role IN ('admin', 'student')),
  name TEXT NOT NULL,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- í™œë™ ê´€ë¦¬
CREATE TABLE activities (
  id SERIAL PRIMARY KEY,
  title TEXT NOT NULL,
  description TEXT,
  content JSONB,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- AI ì±„íŒ…
CREATE TABLE chat_logs (
  id SERIAL PRIMARY KEY,
  user_id UUID REFERENCES auth.users(id),
  message TEXT NOT NULL,
  ai_response TEXT,
  activity_id INTEGER REFERENCES activities(id),
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- íŒŒì¼ ê´€ë¦¬
CREATE TABLE files (
  id SERIAL PRIMARY KEY,
  user_id UUID REFERENCES auth.users(id),
  filename TEXT NOT NULL,
  file_path TEXT NOT NULL,
  file_type TEXT,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- í•™ìƒ ì‘ë‹µ (ë…¼ì¦, í‰ê°€ í†µí•©)
CREATE TABLE student_responses (
  id SERIAL PRIMARY KEY,
  user_id UUID REFERENCES auth.users(id),
  activity_id INTEGER REFERENCES activities(id),
  response_type TEXT CHECK (response_type IN ('argumentation', 'evaluation')),
  content TEXT NOT NULL,
  status TEXT DEFAULT 'draft',
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- RAGìš© ë¬¸ì„œ ì²­í¬ (Vector ê²€ìƒ‰)
CREATE TABLE document_chunks (
  id SERIAL PRIMARY KEY,
  content TEXT NOT NULL,
  embedding VECTOR(1536), -- OpenAI embeddings
  metadata JSONB,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- Vector ê²€ìƒ‰ í•¨ìˆ˜
CREATE OR REPLACE FUNCTION match_documents (
  query_embedding VECTOR(1536),
  similarity_threshold FLOAT = 0.8,
  match_count INT = 5
)
RETURNS TABLE (
  id INTEGER,
  content TEXT,
  similarity FLOAT
)
LANGUAGE plpgsql
AS $$
BEGIN
  RETURN QUERY
  SELECT
    document_chunks.id,
    document_chunks.content,
    1 - (document_chunks.embedding <=> query_embedding) AS similarity
  FROM document_chunks
  WHERE 1 - (document_chunks.embedding <=> query_embedding) > similarity_threshold
  ORDER BY document_chunks.embedding <=> query_embedding
  LIMIT match_count;
END;
$$;
```

### RLS (Row Level Security) ì •ì±…
```sql
-- ì‚¬ìš©ìëŠ” ë³¸ì¸ ë°ì´í„°ë§Œ ì ‘ê·¼
ALTER TABLE chat_logs ENABLE ROW LEVEL SECURITY;
CREATE POLICY "Users can view own chat logs" ON chat_logs
  FOR SELECT USING (auth.uid() = user_id);

CREATE POLICY "Users can insert own chat logs" ON chat_logs
  FOR INSERT WITH CHECK (auth.uid() = user_id);

-- ê´€ë¦¬ìëŠ” ëª¨ë“  ë°ì´í„° ì ‘ê·¼
CREATE POLICY "Admins can view all chat logs" ON chat_logs
  FOR ALL USING (
    EXISTS (
      SELECT 1 FROM user_roles 
      WHERE user_id = auth.uid() AND role = 'admin'
    )
  );
```

## ğŸ”§ í•µì‹¬ ê¸°ëŠ¥ êµ¬í˜„

### 1. Supabase í´ë¼ì´ì–¸íŠ¸ ì„¤ì •
```typescript
// src/lib/supabase.ts
import { createClient } from '@supabase/supabase-js'

const supabaseUrl = import.meta.env.VITE_SUPABASE_URL
const supabaseAnonKey = import.meta.env.VITE_SUPABASE_ANON_KEY

export const supabase = createClient(supabaseUrl, supabaseAnonKey)

// íƒ€ì… ì •ì˜
export type Database = {
  public: {
    Tables: {
      user_roles: {
        Row: {
          id: string
          role: 'admin' | 'student'
          name: string
          created_at: string
        }
        Insert: {
          id: string
          role: 'admin' | 'student'
          name: string
        }
        Update: {
          role?: 'admin' | 'student'
          name?: string
        }
      }
      chat_logs: {
        Row: {
          id: number
          user_id: string
          message: string
          ai_response: string | null
          activity_id: number | null
          created_at: string
        }
        Insert: {
          user_id: string
          message: string
          ai_response?: string
          activity_id?: number
        }
        Update: {
          ai_response?: string
        }
      }
    }
  }
}
```

### 2. ì¸ì¦ ì‹œìŠ¤í…œ
```typescript
// src/hooks/useAuth.ts
import { useEffect, useState } from 'react'
import { User } from '@supabase/supabase-js'
import { supabase } from '../lib/supabase'

export function useAuth() {
  const [user, setUser] = useState<User | null>(null)
  const [loading, setLoading] = useState(true)
  const [userRole, setUserRole] = useState<'admin' | 'student' | null>(null)

  useEffect(() => {
    // í˜„ì¬ ì‚¬ìš©ì ì„¸ì…˜ í™•ì¸
    supabase.auth.getSession().then(({ data: { session } }) => {
      setUser(session?.user ?? null)
      if (session?.user) {
        fetchUserRole(session.user.id)
      }
      setLoading(false)
    })

    // ì¸ì¦ ìƒíƒœ ë³€ê²½ ê°ì§€
    const { data: { subscription } } = supabase.auth.onAuthStateChange(
      async (event, session) => {
        setUser(session?.user ?? null)
        if (session?.user) {
          fetchUserRole(session.user.id)
        } else {
          setUserRole(null)
        }
        setLoading(false)
      }
    )

    return () => subscription.unsubscribe()
  }, [])

  const fetchUserRole = async (userId: string) => {
    const { data } = await supabase
      .from('user_roles')
      .select('role')
      .eq('id', userId)
      .single()
    
    setUserRole(data?.role ?? null)
  }

  const signIn = async (email: string, password: string) => {
    return await supabase.auth.signInWithPassword({ email, password })
  }

  const signUp = async (email: string, password: string, name: string, role: 'admin' | 'student') => {
    const { data, error } = await supabase.auth.signUp({ email, password })
    
    if (data.user && !error) {
      // ì‚¬ìš©ì ì—­í•  ì •ë³´ ì¶”ê°€
      await supabase.from('user_roles').insert({
        id: data.user.id,
        role,
        name
      })
    }
    
    return { data, error }
  }

  const signOut = async () => {
    return await supabase.auth.signOut()
  }

  return {
    user,
    userRole,
    loading,
    signIn,
    signUp,
    signOut
  }
}
```

### 3. ì‹¤ì‹œê°„ ì±„íŒ…
```typescript
// src/hooks/useChat.ts
import { useEffect, useState } from 'react'
import { supabase } from '../lib/supabase'

interface ChatMessage {
  id: number
  user_id: string
  message: string
  ai_response: string | null
  created_at: string
}

export function useChat(userId: string) {
  const [messages, setMessages] = useState<ChatMessage[]>([])
  const [loading, setLoading] = useState(true)

  useEffect(() => {
    // ê¸°ì¡´ ë©”ì‹œì§€ ë¡œë“œ
    fetchMessages()

    // ì‹¤ì‹œê°„ ë©”ì‹œì§€ êµ¬ë…
    const channel = supabase
      .channel('chat')
      .on(
        'postgres_changes',
        {
          event: 'INSERT',
          schema: 'public',
          table: 'chat_logs',
          filter: `user_id=eq.${userId}`
        },
        (payload) => {
          setMessages(prev => [...prev, payload.new as ChatMessage])
        }
      )
      .on(
        'postgres_changes',
        {
          event: 'UPDATE',
          schema: 'public',
          table: 'chat_logs',
          filter: `user_id=eq.${userId}`
        },
        (payload) => {
          setMessages(prev => 
            prev.map(msg => 
              msg.id === payload.new.id ? payload.new as ChatMessage : msg
            )
          )
        }
      )
      .subscribe()

    return () => {
      supabase.removeChannel(channel)
    }
  }, [userId])

  const fetchMessages = async () => {
    setLoading(true)
    const { data } = await supabase
      .from('chat_logs')
      .select('*')
      .eq('user_id', userId)
      .order('created_at', { ascending: true })
    
    setMessages(data || [])
    setLoading(false)
  }

  const sendMessage = async (message: string) => {
    // ë©”ì‹œì§€ ì €ì¥
    const { data } = await supabase
      .from('chat_logs')
      .insert({
        user_id: userId,
        message
      })
      .select()
      .single()

    if (data) {
      // AI ì‘ë‹µ ìš”ì²­ (Edge Function í˜¸ì¶œ)
      const response = await supabase.functions.invoke('ai-chat', {
        body: { 
          message, 
          chatId: data.id,
          userId 
        }
      })
    }
  }

  return {
    messages,
    loading,
    sendMessage
  }
}
```

### 4. Edge Functions (AI í†µí•©)
```typescript
// supabase/functions/ai-chat/index.ts
import { serve } from "https://deno.land/std@0.168.0/http/server.ts"
import { createClient } from 'https://esm.sh/@supabase/supabase-js@2'

const corsHeaders = {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Headers': 'authorization, x-client-info, apikey, content-type',
}

serve(async (req) => {
  if (req.method === 'OPTIONS') {
    return new Response('ok', { headers: corsHeaders })
  }

  try {
    const { message, chatId, userId } = await req.json()

    // OpenAI API í˜¸ì¶œ
    const openaiResponse = await fetch('https://api.openai.com/v1/chat/completions', {
      method: 'POST',
      headers: {
        'Authorization': `Bearer ${Deno.env.get('OPENAI_API_KEY')}`,
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({
        model: 'gpt-3.5-turbo',
        messages: [
          {
            role: 'system',
            content: 'ë‹¹ì‹ ì€ êµìœ¡ìš© AI ì–´ì‹œìŠ¤í„´íŠ¸ì…ë‹ˆë‹¤. í•™ìƒë“¤ì˜ í•™ìŠµì„ ë„ì™€ì£¼ì„¸ìš”.'
          },
          {
            role: 'user',
            content: message
          }
        ],
        max_tokens: 1000,
        temperature: 0.7,
      }),
    })

    const aiData = await openaiResponse.json()
    const aiResponse = aiData.choices[0].message.content

    // Supabaseì— AI ì‘ë‹µ ì—…ë°ì´íŠ¸
    const supabase = createClient(
      Deno.env.get('SUPABASE_URL')!,
      Deno.env.get('SUPABASE_SERVICE_ROLE_KEY')!
    )

    await supabase
      .from('chat_logs')
      .update({ ai_response: aiResponse })
      .eq('id', chatId)

    return new Response(
      JSON.stringify({ success: true, response: aiResponse }),
      {
        headers: { ...corsHeaders, 'Content-Type': 'application/json' },
        status: 200,
      }
    )
  } catch (error) {
    return new Response(
      JSON.stringify({ error: error.message }),
      {
        headers: { ...corsHeaders, 'Content-Type': 'application/json' },
        status: 400,
      }
    )
  }
})
```

## ğŸ’° ë¹„ìš© ë¶„ì„ (ì™„ì „ ë¬´ë£Œ ì‹œì‘ ê°€ëŠ¥)

### ë¬´ë£Œ í‹°ì–´ ì œí•œ
```
GitHub Pages: ì™„ì „ ë¬´ë£Œ
- 100GB ëŒ€ì—­í­/ì›”
- 1GB ì €ì¥ê³µê°„
- ë¬´ì œí•œ public ë ˆí¬ì§€í† ë¦¬

Supabase ë¬´ë£Œ í‹°ì–´:
- 50ë§Œ API ìš”ì²­/ì›”
- 500MB ë°ì´í„°ë² ì´ìŠ¤
- 1GB íŒŒì¼ ì €ì¥ì†Œ
- 2ê°œ Edge Functions

OpenAI API:
- $5 ë¬´ë£Œ í¬ë ˆë”§ (ì‹ ê·œ ê°€ì…)
- ì´í›„ ì‚¬ìš©ëŸ‰ ê¸°ë°˜ ê³¼ê¸ˆ
```

### í™•ì¥ ì‹œ ë¹„ìš©
```
Supabase Pro ($25/ì›”):
- ë¬´ì œí•œ API ìš”ì²­
- 8GB ë°ì´í„°ë² ì´ìŠ¤
- 100GB íŒŒì¼ ì €ì¥ì†Œ
- 500 Edge Functions

ì´ ì›”ê°„ ë¹„ìš©: $25-45 (OpenAI ì‚¬ìš©ëŸ‰ì— ë”°ë¼)
```

## ğŸš€ ë°°í¬ ì›Œí¬í”Œë¡œìš°

### ê°œë°œ ë‹¨ê³„
```bash
# 1. ë¡œì»¬ ê°œë°œ
npm run dev

# 2. Supabase ë¡œì»¬ ê°œë°œ (ì„ íƒì‚¬í•­)
supabase start
supabase functions serve

# 3. ì½”ë“œ ì»¤ë°‹
git add .
git commit -m "feat: ìƒˆ ê¸°ëŠ¥ ì¶”ê°€"
git push origin main
```

### ìë™ ë°°í¬
```
GitHub Push â†’ GitHub Actions â†’ Build â†’ Deploy to GitHub Pages
           â†“
    í™˜ê²½ë³€ìˆ˜ ì£¼ì… â†’ Vite Build â†’ ìµœì í™” â†’ CDN ë°°í¬
```

### ì»¤ìŠ¤í…€ ë„ë©”ì¸ ì„¤ì •
```bash
# GitHub Pages ì„¤ì •ì—ì„œ
# Custom domain: your-domain.com
# CNAME íŒŒì¼ ìë™ ìƒì„±
```

## ğŸ“Š ì„±ëŠ¥ ìµœì í™”

### GitHub Pages ìµœì í™”
```typescript
// vite.config.ts
export default defineConfig({
  build: {
    rollupOptions: {
      output: {
        manualChunks: {
          vendor: ['react', 'react-dom'],
          supabase: ['@supabase/supabase-js'],
          ui: ['@radix-ui/react-dialog', 'lucide-react']
        }
      }
    }
  }
})
```

### ìºì‹± ì „ëµ
```typescript
// src/lib/cache.ts
import { QueryClient } from '@tanstack/react-query'

export const queryClient = new QueryClient({
  defaultOptions: {
    queries: {
      staleTime: 1000 * 60 * 5, // 5ë¶„
      cacheTime: 1000 * 60 * 30, // 30ë¶„
    }
  }
})
```

## ğŸ¯ ìµœì¢… ì¥ì 

### âœ… **ì™„ì „ ë¬´ë£Œ ì‹œì‘**
- ê°œë°œ ë‹¨ê³„ì—ì„œ $0 ë¹„ìš©
- ì†Œê·œëª¨ ì‚¬ìš©ìë„ ë¬´ë£Œ ìš´ì˜ ê°€ëŠ¥

### âœ… **ê°„ë‹¨í•œ ë°°í¬**
- Git Pushë§Œìœ¼ë¡œ ìë™ ë°°í¬
- ì„œë²„ ê´€ë¦¬ ë¶ˆí•„ìš”
- SSL ì¸ì¦ì„œ ìë™ ì ìš©

### âœ… **í™•ì¥ì„±**
- ì‚¬ìš©ì ì¦ê°€ ì‹œ Supabase Proë¡œ ì—…ê·¸ë ˆì´ë“œ
- GitHub PagesëŠ” íŠ¸ë˜í”½ ì œí•œ ì—†ìŒ

### âœ… **ì•ˆì •ì„±**
- GitHubì˜ 99.9% ì—…íƒ€ì„
- ì „ ì„¸ê³„ CDN ë„¤íŠ¸ì›Œí¬
- ìë™ ë°±ì—… ë° ë²„ì „ ê´€ë¦¬

---

ì´ ê³„íšì„œëŠ” **ìµœì†Œ ë¹„ìš©ìœ¼ë¡œ ì‹œì‘**í•˜ì—¬ **ì ì§„ì ìœ¼ë¡œ í™•ì¥** ê°€ëŠ¥í•œ í˜„ì‹¤ì ì¸ ì†”ë£¨ì…˜ì„ ì œì‹œí•©ë‹ˆë‹¤. êµìœ¡ìš© í”„ë¡œì íŠ¸ì— ìµœì í™”ëœ êµ¬ì¡°ì…ë‹ˆë‹¤.